<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crie Sua Conta</title>
  <link rel="stylesheet" href="css/estilo_paginadeloginempregado.css">
  <link rel="shortcut icon" href="docs/flaicon-png-transparente.png" type="image/x-icon">
</head>
<body>
<script>
if (localStorage.getItem("usuarioLogado") === "true") {
  // Usuário já está logado, redireciona para a página interna
  window.location.href = "/public/html/index.html";
}
</script>

  <div class="form-container">
    <!-- Seção esquerda -->
    <div class="left-section">
      <h1>Crie<br>Sua Conta</h1>
      <p>Complete o Formulário Para Fazer o seu cadastro no site Nova Chance</p>
      <a href="/html/pagina_de_criar_conta.html"create-company-account"> Criar conta como empregador</a>
      <a href="/html/loginempresa.html"create-company-account"> Faça o seu Login</a>
    </div>

    <!-- Seção direita -->
    <div class="right-section">
      <form id="empresaForm">
        <div class="form-group">
          <input type="text" id="nome" placeholder="Nome de Empresa *" required>
          <input type="text" id="cnpj" placeholder="CNPJ *" required>
        </div>
        <div class="form-group">
          <input type="text" id="telefone" placeholder="Telefone *" required>
          <input type="email" id="email" placeholder="Gmail *" required>
        </div>
        <div class="form-group">
          <input type="url" id="redeSocial" placeholder="Link de Rede Social">
          <input type="password" id="senha" placeholder="Senha *" required>
        </div>
        <div class="form-group">
          <input type="password" id="confirmarSenha" placeholder="Confirmar Senha *" required>
        </div>
        <button type="submit" class="submit-button">Enviar</button>
      </form>

      <script>
        document.getElementById("empresaForm").addEventListener("submit", async function(e) {
          e.preventDefault();

          const empresa = {
            nome: document.getElementById("nome").value,
            cnpj: document.getElementById("cnpj").value,
            telefone: document.getElementById("telefone").value,
            email: document.getElementById("email").value,
            redeSocial: document.getElementById("redeSocial").value,
            senha: document.getElementById("senha").value
          };

          const res = await fetch("/empresas", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(empresa)
          });

          if (res.ok) {
            alert("✅ Empresa cadastrada com sucesso!");
            document.getElementById("empresaForm").reset();
          } else {
            alert("❌ Erro ao cadastrar empresa.");
          }
        });
      </script>
      
    </div>
  </div>
</body>
</html>
